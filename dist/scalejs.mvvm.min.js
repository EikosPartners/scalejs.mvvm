!function(a){"function"==typeof define&&define.amd?define("scalejs.mvvm/classBindingProvider",["knockout","exports"],a):a(ko)}(function(a,b,c){var d=function(a,b){var c,d;if(!a)return a;c={};for(d in a)a.hasOwnProperty(d)&&(c[d]=b(a[d],d,a));return c},e=function(a){return function(){return a}};a.version>="3.0.0"&&!function(){var b=document.createElement("div");a.applyBindings(null,b);var c=a.contextFor(b),d=!a.storedBindingContextForNode,e=d?"A":"_subscribable",f=d?"wb":"_addNode",g=function(){};g[f]=g,c.constructor.prototype[e]=g,a.cleanNode(b)}();var f=function(b,c){var f=new a.bindingProvider,g={};c=c||{},this.attribute=c.attribute||"data-class",this.virtualAttribute="ko "+(c.virtualAttribute||"class")+":",this.fallback=c.fallback,this.bindings=b||{},this.bindingRouter=c.bindingRouter||function(a,b){var c,d,e,f;if(b[a])return b[a];for(e=a.split("."),f=b,c=0,d=e.length;d>c;c++)f=f[e[c]];return f},this.registerBindings=function(b){a.utils.extend(this.bindings,b)},this.nodeHasBindings=function(a){var b,c;return 1===a.nodeType?b=a.getAttribute(this.attribute):8===a.nodeType&&(c=""+a.nodeValue||a.text,b=c.indexOf(this.virtualAttribute)>-1),!b&&this.fallback&&(b=f.nodeHasBindings(a)),b},this.getBindingsFunction=function(b){return function(h,i){var j,k,l,m,n,o,p={},q="";if(1===h.nodeType?q=h.getAttribute(this.attribute):8===h.nodeType&&(n=""+h.nodeValue||h.text,o=n.indexOf(this.virtualAttribute),o>-1&&(q=n.substring(o+this.virtualAttribute.length))),q)for(q=q.replace(/^(\s|\u00A0)+|(\s|\u00A0)+$/g,"").replace(/(\s|\u00A0){2,}/g," ").split(" "),j=0,k=q.length;k>j;j++)l=this.bindingRouter(q[j],this.bindings),l?(m="function"==typeof l?l.call(i.$data,i,q):l,b&&(m=d(m,e)),a.utils.extend(p,m)):c.log&&c.log('No binding function provided for data class "'+q[j]+'" in element ',h,"\nMake sure data class is spelled correctly and that it's binding function is registered.");else this.fallback&&(p=f[b?"getBindingAccessors":"getBindings"](h,i));if(c.log)for(var r in p)!p.hasOwnProperty(r)||"_ko_property_writers"===r||"valueUpdate"===r||"optionsText"===r||"optionsValue"===r||"clickBubble"===r||a.bindingHandlers[r]||g[r]||(m?c.log('Unknown binding handler "'+r+'" found in element',h,' defined in data-class "'+q+'" as',m,"\nMake sure that binding handler's name is spelled correctly and that it's properly registered. \nThe binding will be ignored."):c.log('Unknown binding handler "'+r+'" in',h,"\nMake sure that it's name spelled correctly and that it's properly registered. \nThe binding will be ignored."),g[r]=r);return p}},this.getBindings=this.getBindingsFunction(!1),this.getBindingAccessors=this.getBindingsFunction(!0)};return b||(a.classBindingProvider=f),f}),define("scalejs.mvvm/htmlTemplateSource",["knockout","scalejs.core"],function(a,b){"use strict";function c(a){var b=document.createElement("div");"undefined"!=typeof WinJS?WinJS.Utilities.setInnerHTMLUnsafe(b,a):b.innerHTML=a,f(b.childNodes).forEach(function(a){1===a.nodeType&&g(a,"id")&&(i[a.id]=a.innerHTML)})}function d(){return i}function e(b){return b instanceof Element?{nodes:a.templateSources.domElement.prototype.nodes.bind({domElement:b})}:{data:function(a,c){return g(i.data,b)||(i.data[b]={}),1===arguments.length?i.data[b][a]:void(i.data[b][a]=c)},text:function(a){if(0===arguments.length)return i[b];throw new Error('An attempt to override template "'+b+'" with content "'+a+'" Template overriding is not supported.')}}}var f=b.array.toArray,g=b.object.has,h=new a.nativeTemplateEngine,i={data:{}};return h.makeTemplateSource=e,a.setTemplateEngine(h),{registerTemplates:c,getRegisteredTemplates:d}}),define("scalejs.mvvm/selectableArray",["knockout","scalejs.core"],function(a,b){"use strict";var c=a.isObservable,d=a.utils.unwrapObservable,e=a.observable,f=a.computed,g=b.object.has,h=b.array;return function(a,b){function i(a){if(!c(a.isSelected)||g(b.isSelectedPath)&&"isSelected"!==b.isSelectedPath){if(c(a.isSelected))throw new Error('item has observable `isSelected` property but `isSelectedPath` specified as "'+b.isSelectedPath+"\". `selectable` uses `isSelected` property of an item to determine whether it's selected. Either don't specify `isSelectedPath` or rename `isSelected` property to something else.");if(a.hasOwnProperty("isSelected"))throw new Error("item has non-observable `isSelected` property. `selectable` uses `isSelected` property of an item to determine whether it's selected. Either make `isSelected` observable or rename it.");if(a.isSelected=e(),g(b.isSelectedPath)&&"isSelected"!==b.isSelectedPath&&!c(a[b.isSelectedPath]))throw new Error("item's property \""+b.isSelectedPath+"\" specified by `isSelectedPath`  isn't observable. Either make it observable or specify different property in  `isSelectedPath`");g(b.isSelectedPath)&&(a.isSelected=a[b.isSelectedPath]),a.isSelected.subscribe(function(b){b?k(a):k()===a&&k(void 0)})}}b=b||{};var j,k=b.selectedItem||e(),l=b.selectionPolicy||"single";return c(a)?j=f(function(){var b=d(a);return b.forEach(i),h.copy(b)}):(a.forEach(i),j=h.copy(a)),k.subscribe(function(a){d(j).forEach(function(b){b.isSelected(b===a)}),"deselect"===l&&a&&setTimeout(function(){k(void 0)},0)}),j.selectedItem=k,j}}),define("scalejs.mvvm/ko.utils",["scalejs.core","knockout"],function(a,b){"use strict";function c(c,d){return a.array.toArray(c).map(function(a){var c=a.cloneNode(!0);return d?b.cleanNode(c):c})}return{cloneNodes:c}}),define("scalejs.mvvm/mvvm",["knockout","knockout.mapping","scalejs.core","scalejs.mvvm/classBindingProvider","./htmlTemplateSource","./selectableArray","./ko.utils"],function(a,b,c,d,e,f,g){"use strict";function h(b){return a.observable(b)}function i(b){return a.observableArray(b)}function j(b){return a.computed(b)}function k(a){return b.toJSON(a)}function l(a){return JSON.parse(k(a))}function m(){v(arguments).forEach(w.registerBindings.bind(w))}function n(a,c,d){var e=Object.keys(d).reduce(function(a,b){return u(a,{k:b,create:function(a){return d[b](a.data)}})},{});return b.fromJS(a,e,c)}function o(){v(arguments).forEach(e.registerTemplates)}function p(a,b){var c={};return c[a]=b,c}function q(a,b){return p("template",{name:a,data:b})}function r(a,b){return{dataClass:a,viewmodel:b}}function s(a){return document.getElementsByTagName(a)[0]}function t(b){var c,d=document.createComment(" ko class: scalejs-shell "),e=document.createComment(" /ko ");c=document.getElementsByTagName("script"),c=c[c.length-1].parentElement,Array.prototype.slice.call(document.getElementsByTagName("script")).forEach(function(a){-1!=(a.getAttribute("data-main")||"").indexOf("app/app")&&(c=a.parentElement)}),c!==s("html")&&c!==s("head")||(c=s("body")),c&&!b.doNotRender&&(c.appendChild(d),c.appendChild(e),m({"scalejs-shell":function(a){return{render:a.$data.root}}}),a.applyBindings({root:x},c))}var u=c.object.merge,v=c.array.toArray,w=new d({},{log:c.log.warn,fallback:!0}),x=a.observable();return a.bindingProvider.instance=w,{core:{mvvm:{root:x,toJson:k,registerBindings:m,registerTemplates:o,dataClass:r,template:q,dataBinding:p,selectableArray:f,getRegisteredTemplates:e.getRegisteredTemplates,ko:{utils:g}}},sandbox:{mvvm:{observable:h,observableArray:i,computed:j,registerBindings:m,registerTemplates:o,toJson:k,toViewModel:n,toObject:l,dataClass:r,template:q,dataBinding:p,selectableArray:f,getRegisteredTemplates:e.getRegisteredTemplates,root:x}},init:t}}),define("scalejs.bindings/change",["knockout","scalejs.core"],function(a,b){"use strict";function c(b,c,f,g){function h(a,c){return function(d){d!==c&&(c=d,a.call(g,d,b))}}function i(c,d){a.computed({read:function(){var a=m(g[c]);d(a)},disposeWhenNodeIsRemoved:b})}if(e(g)){var j,k,l,m=a.utils.unwrapObservable,n=c(),o=m(n);for(j in o)o.hasOwnProperty(j)&&(k=o[j],d(k.initial,"function")&&k.initial.apply(g,[m(g[j]),b]),d(k.update,"function")&&(l=h(k.update,m(g[j]))),d(k,"function")&&(l=h(k,m(g[j]))),l&&i(j,l))}}var d=b.type.is,e=b.object.has;return{init:c}}),define("scalejs.bindings/render",["scalejs.core","knockout"],function(a,b){"use strict";function c(){return{controlsDescendantBindings:!0}}function d(a,c,d,g,h){function i(){k?b.applyBindingsToNode(a,k,g):b.virtualElements.emptyNode(a)}var j,k,l,m,n=f(c());if(n)if(e(n.dataClass,"string")){if(j=b.bindingProvider.instance.bindingRouter(n.dataClass,b.bindingProvider.instance.bindings),!j)throw new Error("Don't know how to render binding \""+n.dataClass+'" - no such binding registered. Either register the bindng or correct its name.');j&&(k=e(j,"function")?j.call(n.viewmodel||g,h):j)}else k=e(n,"function")?n.call(g,h):n;m=i,l={getElement:function(){return a}},m.call(l),b.utils.domData.set(a,"binding",k)}var e=a.type.is,f=(a.object.has,b.utils.unwrapObservable);return{init:c,update:d}}),define("scalejs.mvvm",["scalejs.core","knockout","scalejs.mvvm/mvvm","./scalejs.bindings/change","./scalejs.bindings/render","module"],function(a,b,c,d,e,f){"use strict";b.bindingHandlers.change=d,b.bindingHandlers.render=e,b.virtualElements.allowedBindings.change=!0,b.virtualElements.allowedBindings.render=!0,c.init(f.config()),a.registerExtension(c)}),define("scalejs.mvvm.bindings",[],function(){"use strict";return{load:function(a,b,c,d){var e=a.match(/([^,]+)/g)||[];e=e.map(function(a){return a.indexOf(".js",a.length-3)>-1?a:(-1===a.indexOf("Bindings",a.length-"Bindings".length)&&(a+="Bindings"),-1===a.indexOf("/")?"./bindings/"+a:a)}),e.push("scalejs.mvvm","scalejs.core"),b(e,function(){var a=arguments[arguments.length-1],b=Array.prototype.slice.call(arguments,0,arguments.length-2);d.isBuild||a.mvvm.registerBindings.apply(null,b),c(b)})}}}),define("scalejs.mvvm.views",[],function(){"use strict";return{load:function(a,b,c,d){var e=a.match(/([^,]+)/g)||[];e=e.map(function(a){return-1===a.indexOf(".html",a.length-5)&&(a+=".html"),-1===a.indexOf("/")&&(a="./views/"+a),"text!"+a}),e.push("scalejs.mvvm","scalejs.core"),b(e,function(){var a=arguments[arguments.length-1],b=Array.prototype.slice.call(arguments,0,arguments.length-2);d.isBuild||a.mvvm.registerTemplates.apply(null,b),c(b)})}}});